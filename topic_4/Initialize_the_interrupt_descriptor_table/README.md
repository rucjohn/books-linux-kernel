# 初始化中断描述符表

现在，我们知道了 80x86 微处理器在硬件级对中断和异常做了些什么，接下来，我们可以继续描述如何初始化中断描述符表。

**内核启用中断以前，必须把 IDT 表的初始地址装到 ldtr寄存器，并初始化表中的每项**。这项工作是在初始化系统时完成的（参见附录一）。

int 指令允许用户态进程发出一个中断信号，其值可以是 0~255 的任意一个向量。因此，为了防止用户通过int指令模拟非法的中断和异常，IDT 的初始化必须非常小心。这可以通过把中断或陷阵门描述符的 DPL 字段设置成 0 来实现。如果进程试图发出其中的一个中断信号，控制单元将检查出 CPL 的值与 DPL 字段有冲突，并且产生一个 “General protection” 异常。

然而，在少数情况下，用户态进程必须能发出一个编程异常。为此，只要把中断或陷阴门描述符的DPL字段设置成3，即特权级尽可能一样高就足够了。

现在，让我们来看一下 Linux 是如何实现这种策略的。

